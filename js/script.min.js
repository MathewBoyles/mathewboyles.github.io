var app;$(document).ready(function(){app={assetCount:0,assetLoaded:0,loaded:!1,menu:null,popInit:!1,vars:{root:"/",thumbnails:"/img/thumbnails/",covers:"/img/thumbnails/cover/",items:[]},contentAware:function(){if(!(app.assetLoaded<app.assetCount||"undefined"==typeof mlPushMenu||"undefined"==typeof Modernizr||"undefined"==typeof classie||"undefined"==typeof Template7||0===app.vars.links.length||0===app.vars.items.length||($("tmpl").each(function(){$(this).data("dataInit")||($(this).data("dataInit",!0),app.template($(this).attr("src"),function(a){$(this).after(a).remove(),app.contentAware()},$(this)))}),$("tmpl").is("*")))){if($(".js-scroll").each(function(){$(this).data("dataInit")||$(this).data("dataInit",1).click(function(a){$($(this).attr("href")).is(":visible")&&($("#scroller").animate({scrollTop:$($(this).attr("href")).offset().top+$("#scroller").scrollTop()},500),a.preventDefault())})}),$(".js-image").each(function(){$(this).data("dataInit")||$(this).data("dataInit",1).click(function(a){var t=$("#lightbox").html(),e=Template7.compile(t)({title:$(this).attr("title"),image:$(this).attr("href")});$(e).modal("show").on("hidden.bs.modal",function(){$(this).remove()}),a.preventDefault()})}),!$("#portfolio").data("dataInit")&&$("#portfolio").is("*")){$("#portfolio").data("dataInit",1);var a=$("#portfolio-item").html(),t=Template7.compile(a)({items:app.vars.items});$("#portfolio").find("#portfolio-item,.mix").last().after(t);var e="works_"+(new Date).getTime();$("#works-wrap").attr("id",e),mixitup($("#"+e))}return app.loaded||(app.loaded=!0,$(window).trigger("hashchange"),app.menu=new mlPushMenu($("#mp-menu")[0],$("#navbar-open")[0]),$("#navbar-close").click(function(){$("#navbar-open").click()})),app}},loadPage:function(a){return a||(a="index"),$("#mp-menu .mp-level").hasClass("mp-level-open")&&$("#navbar-open").click(),$.ajax({url:app.vars.root+"tmpl/pages/"+a+".html",cache:!1,success:function(a,t,e){$("#loading").fadeOut(250),$("#scroller").scrollTop(0);var s=a.match(/<title>(.*?)<\/title>/g).map(function(a){return a.replace(/<\/?title>/g,"")});document.title=s[0];p=new RegExp("{{root}}","g");a=a.replace(p,app.vars.root);p=new RegExp("{{thumbnails}}","g");a=a.replace(p,app.vars.thumbnails);var p=new RegExp("{{covers}}","g");a=a.replace(p,app.vars.covers),$("#page").html(a),$("#page title").remove(),app.contentAware()},error:function(a){app.loadPage(a.status)}}),app},include:function(a,t,e){if("css"==t){var s;(s=$("<link />")).attr("rel","stylesheet").attr("href",a).ready(e),$("body").append(s)}return"js"==t&&$.getScript(a,e),"json"==t&&$.getJSON(a,e),app},template:function(a,t,e){var s;return s="https://"==a.substr(0,8)||"http://"==a.substr(0,7)?a:app.vars.root+"tmpl/"+a+".html",$.ajax({url:s,success:function(a,t,e){return function(a,s,p){var n=a,o=Template7.compile(n)(app.vars),i=new RegExp("##tmpl##","g");o=o.replace(i,""),t.call(e,o,s,p),app.contentAware()}}(a,t,e),cache:!1}),app},assetAdd:function(){return app.assetCount++,app},assetLoad:function(){return app.assetLoaded++,app.contentAware(),app},fonts:["Montserrat:700,400:latin","Zilla+Slab"]},$.ajaxSetup({cache:!0}),app.assetAdd().include("https://fonts.googleapis.com/css?family="+app.fonts.join("|"),"css",app.assetLoad),app.assetAdd().include("https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css","css",app.assetLoad),app.assetAdd().include("https://cdnjs.cloudflare.com/ajax/libs/template7/1.2.3/template7.min.js","js",app.assetLoad),app.assetAdd().include("https://cdnjs.cloudflare.com/ajax/libs/Swiper/3.4.2/js/swiper.jquery.min.js","js",app.assetLoad),app.assetAdd().include("https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js","js",app.assetLoad),app.assetAdd().include("https://cdnjs.cloudflare.com/ajax/libs/classie/1.0.1/classie.min.js","js",app.assetLoad),app.assetAdd().include(app.vars.root+"js/mixitup.min.js","js",app.assetLoad),app.assetAdd().include(app.vars.root+"js/mlpushmenu.min.js","js",app.assetLoad),app.assetAdd().include(app.vars.root+"js/links.json?_="+(new Date).getTime(),"json",function(a){app.vars.links=a,app.assetLoad()}),app.assetAdd().include(app.vars.root+"js/items.json?_="+(new Date).getTime(),"json",function(a){app.vars.items=a,app.assetLoad()}),app.contentAware()}),$(window).bind("hashchange",function(a){$("#loading").fadeIn(250),$(".modal").modal("hide"),app.loadPage(window.location.hash.replace("#!/",""))});